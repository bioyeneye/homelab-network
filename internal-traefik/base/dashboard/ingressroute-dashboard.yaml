# File: traefik/dashboard/ingressroute-dashboard.yaml
apiVersion: traefik.io/v1alpha1 # Corrected API version
kind: IngressRoute
metadata:
  name: traefik-dashboard
  namespace: internal-traefik # Must match the Traefik deployment namespace
spec:
  entryPoints:
    - websecure # Use the websecure entrypoint for HTTPS
  routes:
    - match: (PathPrefix(`/dashboard`) || PathPrefix(`/api`))
      kind: Rule
      services:
        - name: api@internal # Points to Traefik's internal API service
          kind: TraefikService # Indicate this is a Traefik internal service
      middlewares:
        - name: dashboard-auth@kubernetescrd # Fully qualified middleware name (recommended)
  tls:
    secretName: traefik-dashboard-tls